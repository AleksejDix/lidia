<template>
  <div class="flex flex-col h-full">
    <SkipLink target="main-content">Skip to main content</SkipLink>
    <SkipLink target="navigation">Skip to navigation</SkipLink>
    <SkipLink target="footer">Skip to footer</SkipLink>
    <!-- 
    <Landmark tag="header" id="header" class="border-b-2 sticky top-0 min-h-[56px] p-4">
      <h1>Your Dashboard Title</h1>
    </Landmark> -->
    <div class="flex h-full grow mx-auto max-w-[1050px] w-full">
      <Landmark tag="aside" id="navigation" class="w-[200px] p-[25px]">
        <Navigation></Navigation>
        <nav>
          <router-link class="clickable" to="/">Home</router-link>
          <span> | </span>
        </nav>
      </Landmark>

      <Landmark tag="main" id="main-content" class="mx-auto grow border-white px-[100px] py-[40px]">
        <h1>Breadcrumbs</h1>
        <Breadcrumbs />
        <router-view />
      </Landmark>
    </div>
  </div>
</template>

<script setup lang="ts">
import { RouterView } from 'vue-router'
import { Breadcrumbs } from './components/Breadcrumbs'
import { useRoute } from 'vue-router'
import { computed } from 'vue'
import { useRouter } from 'vue-router'
import { useEventListener } from '@vueuse/core'
import { useEscapeStore } from '@/use/useEscapeStore'
import { Landmark } from '@/components/Layout'
import { SkipLink } from '@aleksejdix/focus'
import { Navigation } from '@/components/Navigation'

const router = useRouter()
const route = useRoute()
const escapeStore = useEscapeStore()

useEventListener(document, 'keydown', (e) => {
  if (e.key === 'Escape') {
    escapeStore.destroy()
  }
})

const routeWithModal = computed(() => {
  if (history.state && history.state.backgroundView) {
    return router.resolve(history.state.backgroundView)
  } else {
    return route
  }
})
</script>

<style>
:root {
  @apply bg-blue-600;
  --blue-600: #2563eb;
  --white-opacity-20: rgba(255, 255, 255, 0.2);
  --white-opacity-10: rgba(255, 255, 255, 0.1);
  --accent-color: hotpink;
  color: white;
  background-color: var(--blue-600);
  background-repeat: repeat;

  background-position: top center;
}

html,
body,
#app {
  @apply h-full w-full inset-0 fixed;
}

html {
  background: linear-gradient(
      to bottom,
      transparent 0px,
      var(--white-opacity-10) 0px,
      var(--white-opacity-10) 1px,
      transparent 1px
    ),
    linear-gradient(
      to right,
      transparent 0px,
      var(--white-opacity-10) 0px,
      var(--white-opacity-10) 1px,
      transparent 1px
    );
  background-size: 10px 10px;
  background-position: top center;
}

body {
  background: linear-gradient(
      to bottom,
      transparent 0px,
      var(--white-opacity-20) 0px,
      var(--white-opacity-20) 1px,
      transparent 1px
    ),
    linear-gradient(
      to right,
      transparent 0px,
      var(--white-opacity-20) 0px,
      var(--white-opacity-20) 1px,
      transparent 1px
    );
  background-size: 50px 50px;
  background-position: top center;
}
</style>

<style src="@aleksejdix/disclosure/dist/style.css"></style>
<style src="@aleksejdix/focus/dist/style.css"></style>
